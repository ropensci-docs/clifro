<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="clifro">
<title>Working with *clifro* Stations • clifro</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Working with *clifro* Stations">
<meta property="og:description" content="clifro">
<meta property="og:image" content="https://docs.ropensci.org/clifro/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">clifro</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">3.2-5.9003</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../articles/clifro.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/cfStation.html">Working with *clifro* Stations</a>
    <a class="dropdown-item" href="../articles/choose-datatype.html">Choosing a *clifro* Datatype</a>
    <a class="dropdown-item" href="../articles/choose-station.html">Choosing a *clifro* Station</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/clifro/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Working with *clifro* Stations</h1>
                        <h4 data-toc-skip class="author">Blake Seers</h4>
            
            <h4 data-toc-skip class="date">2024-03-03</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/clifro/blob/HEAD/vignettes/cfStation.Rmd" class="external-link"><code>vignettes/cfStation.Rmd</code></a></small>
      <div class="d-none name"><code>cfStation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>There are two functions available in <code>clifro</code> to create requisite <code>cfStation</code> objects to send queries to retrieve data via <code>clifro</code>. The first one is to search for stations using the <code>cf_find_station</code> function as detailed in the <a href="choose-station.html">choose stations vignette</a>. The other function that creates <code>cfStation</code> objects is the <code>cf_station</code> function that requires comma separated agent numbers as the only input. This vignette covers the construction of a <code>cfStation</code> object via the <code>cf_station</code> function, and then shows examples of plotting and visualising the station’s locations using KML files or within R using the <a href="https://cran.r-project.org/package=ggmap" class="external-link">ggmap</a> package.</p>
</div>
<div class="section level2">
<h2 id="creating-a-cfstation-object-from-agent-numbers">Creating a cfStation object from agent numbers<a class="anchor" aria-label="anchor" href="#creating-a-cfstation-object-from-agent-numbers"></a>
</h2>
<p>This is the simplest method to create a <code>cfStation</code> object, simply supply the <code>cf_station</code> function the comma separated agent numbers. The following stations are (or were) located around Lake Tekapo in Canterbury, in the South Island of New Zealand:</p>
<ol style="list-style-type: decimal">
<li>Coal (Ski Field)</li>
<li>Macaulay (Mt Gerald)</li>
<li>South Opua</li>
<li>Mount John</li>
<li>Lake Tekapo Ews</li>
<li>Godley Peaks</li>
<li>Lilybank</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lake.tekapo.st</span> <span class="op">=</span> <span class="fu"><a href="../reference/cfStation-class.html">cf_station</a></span><span class="op">(</span><span class="fl">12709</span>, <span class="fl">35567</span>, <span class="fl">39557</span>, <span class="fl">4630</span>, <span class="fl">24945</span>, <span class="fl">4616</span>, <span class="fl">4602</span><span class="op">)</span></span>
<span><span class="va">lake.tekapo.st</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"agent"</span>, <span class="st">"start"</span>, <span class="st">"end"</span>, <span class="st">"open"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##                      name agent      start                 end  open</span></span>
<span><span class="co">## 1         Coal @ Skifield 12709 1989-02-01 2020-09-01 02:00:00  TRUE</span></span>
<span><span class="co">## 2      Macaulay@Mt Gerald 35567 1990-07-04 2020-09-01 02:00:00  TRUE</span></span>
<span><span class="co">## 3         Lake Tekapo Ews 24945 2003-06-18 2020-09-01 02:00:00  TRUE</span></span>
<span><span class="co">## 4 South Opua @ South Opua 39557 2011-09-28 2020-09-01 02:00:00  TRUE</span></span>
<span><span class="co">## 5        Lilybank Station  4602 1950-01-01 1992-09-30 00:00:00 FALSE</span></span>
<span><span class="co">## 6                 Mt John  4630 1962-10-01 1988-01-01 00:00:00 FALSE</span></span>
<span><span class="co">## 7    Godley Peaks, Tekapo  4616 1914-01-01 1976-06-01 00:00:00 FALSE</span></span></code></pre>
<p>We can see that subsetting <code>lake.tekapo.st</code> acts just like a <code>data.frame</code> object, although it is technically a <code>cfStation</code> object. Most of the common <code>data.frame</code> methods work on <code>cfStation</code> objects.</p>
<div class="section level3">
<h3 id="adding-more-stations">Adding more stations<a class="anchor" aria-label="anchor" href="#adding-more-stations"></a>
</h3>
<p>To add more stations to this list the addition sign is used. Any repeated stations are removed and the resulting list is ordered by the end dates first and then by the stations’ start dates.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">added.stations.st</span> <span class="op">=</span> <span class="va">lake.tekapo.st</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/cfStation-class.html">cf_station</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/cf_find_station.html">cf_find_station</a></span><span class="op">(</span><span class="st">"lighthouse"</span>, status <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span><span class="va">added.stations.st</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"agent"</span>, <span class="st">"start"</span>, <span class="st">"end"</span>, <span class="st">"open"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##                       name agent      start        end  open</span></span>
<span><span class="co">## 1              Reefton Ews  3925 1960-08-01 2020-09-01  TRUE</span></span>
<span><span class="co">## 2          Coal @ Skifield 12709 1989-02-01 2020-09-01  TRUE</span></span>
<span><span class="co">## 3       Macaulay@Mt Gerald 35567 1990-07-04 2020-09-01  TRUE</span></span>
<span><span class="co">## 4          Lake Tekapo Ews 24945 2003-06-18 2020-09-01  TRUE</span></span>
<span><span class="co">## 5  South Opua @ South Opua 39557 2011-09-28 2020-09-01  TRUE</span></span>
<span><span class="co">## 6     Tiri Tiri Lighthouse  1401 1946-02-01 2020-08-31  TRUE</span></span>
<span><span class="co">## 7  Kapoaiaia At Lighthouse 42673 1998-05-17 2020-08-31  TRUE</span></span>
<span><span class="co">## 8        Orakei Lighthouse 44394 2020-05-01 2020-08-31  TRUE</span></span>
<span><span class="co">## 9     Rangitoto Lighthouse 44400 2020-05-01 2020-08-31  TRUE</span></span>
<span><span class="co">## 10        Lilybank Station  4602 1950-01-01 1992-09-30 FALSE</span></span>
<span><span class="co">## 11                 Mt John  4630 1962-10-01 1988-01-01 FALSE</span></span>
<span><span class="co">## 12   Cape Brett Lighthouse  1197 1934-11-01 1978-10-01 FALSE</span></span>
<span><span class="co">## 13     Nugget Lighthouse B  5894 1975-03-01 1977-08-31 FALSE</span></span>
<span><span class="co">## 14     Nugget Lighthouse A  5895 1975-03-01 1977-08-31 FALSE</span></span>
<span><span class="co">## 15    Godley Peaks, Tekapo  4616 1914-01-01 1976-06-01 FALSE</span></span>
<span><span class="co">## 16      Moeraki Lighthouse  5325 1935-10-01 1975-06-01 FALSE</span></span></code></pre>
<p>The above code chunk adds the 7 stations around Lake Tekapo, the subscription-free reefton EWS station (<code><a href="../reference/cfStation-class.html">cf_station()</a></code>), and all stations presumably located (currently or historically) on or near a lighthouse.</p>
<p>Allowing multiple searches is not currently available using the web portal, CliFlo, but the above code demonstrates how easy it can be in <code>clifro</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="visualising-the-station-locations">Visualising the station locations<a class="anchor" aria-label="anchor" href="#visualising-the-station-locations"></a>
</h2>
<p>CliFlo does not currently have any visualisation tools to aid in the selection of stations which can make the task of choosing geographically suitable stations a hard one.</p>
<div class="section level3">
<h3 id="using-kml-files">Using KML files<a class="anchor" aria-label="anchor" href="#using-kml-files"></a>
</h3>
<p>The <code>cf_save_kml</code> functionality was introduced in the <a href="choose-station.html">choose stations vignette</a> and this function can be used on any <code>cfStation</code> object. To return a KML file showing all the stations within our <code>added.stations.st</code> object we just run <code>cf_save_kml(added.stations.st)</code> in R and the KML file is returned.</p>
<div class="figure">
<img src="figures/map.png" alt=""><p class="caption">Climate stations in the greater Auckland region.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
