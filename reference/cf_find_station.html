<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Search for clifro stations based on name, region, location or network
number, and return a cfStation object."><title>Search for Clifro Stations — cf_find_station • clifro</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Search for Clifro Stations — cf_find_station"><meta property="og:description" content="Search for clifro stations based on name, region, location or network
number, and return a cfStation object."><meta property="og:image" content="https://docs.ropensci.org/clifro/logo.png"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">clifro</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">3.2-5.9003</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="../articles/clifro.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/cfStation.html">Working with *clifro* Stations</a>
    <a class="dropdown-item" href="../articles/choose-datatype.html">Choosing a *clifro* Datatype</a>
    <a class="dropdown-item" href="../articles/choose-station.html">Choosing a *clifro* Station</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/clifro/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Search for Clifro Stations</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/clifro/blob/HEAD/R/findStations.R" class="external-link"><code>R/findStations.R</code></a></small>
      <div class="d-none name"><code>cf_find_station.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Search for <span class="pkg">clifro</span> stations based on name, region, location or network
number, and return a <code>cfStation</code> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cf_find_station</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  search <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"region"</span>, <span class="st">"network"</span>, <span class="st">"latlong"</span><span class="op">)</span>,</span>
<span>  <span class="va">datatype</span>,</span>
<span>  combine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"all"</span>, <span class="st">"any"</span><span class="op">)</span>,</span>
<span>  status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"open"</span>, <span class="st">"closed"</span>, <span class="st">"all"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>...</dt>
<dd><p>arguments to pass into the search, these differ depending on
<code>search</code>.</p></dd>


<dt>search</dt>
<dd><p>one of <code>name</code>, <code>network</code>, <code>region</code> or
<code>latlong</code> indicating the type of search to be conducted.</p></dd>


<dt>datatype</dt>
<dd><p><code>cfDatatype</code> object for when the search is based on
datatypes.</p></dd>


<dt>combine</dt>
<dd><p>character string <code>"all"</code> or <code>"any"</code> indicating if the
stations contain all or any of the selected datatypes for when the search is
based on datatypes.</p></dd>


<dt>status</dt>
<dd><p>character string indicating <code>"open"</code>, <code>"closed"</code> or
<code>"all"</code> stations be returned by the search.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>cfStation</code> object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>cf_find_station</code> function is a convenience function for finding
CliFlo stations in <span style="R">R</span>. It uses the CliFlo
<a href="https://cliflo.niwa.co.nz/pls/niwp/wstn.get_stn_html" class="external-link">Find Stations</a>
page to do the searching, and therefore means that the stations are not
stored within <span class="pkg">clifro</span>.</p>
<p>If <code>datatype</code> is missing then the search is conducted
without any reference to datatypes. If it is supplied then the
search will only return stations that have any or all of the supplied
datatypes, depending on <code>combine</code>. The default behaviour is to search
for stations based on pattern matching the station name and return only the
open stations.</p>
<p>If the <code>latlong</code> search type is used the function expects named
arguments with names (partially) matching latitude,
longitude and radius. If the arguments are passed in without names they must
be in order of latitude, longitude and radius (see examples).</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Since the searching is done by CliFlo there are obvious restrictions.
Unfortunately the pattern matching for station name does not provide
functionality for regular expressions, nor does it allow simultaneous
searches although <span class="pkg">clifro</span> does provide some extra functionality, see
the 'OR query Search' example below.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="cf_save_kml.html">cf_save_kml</a></code> for saving the resulting stations as a KML
file, <code><a href="cfStation-class.html">cf_station</a></code> for creating <code><a href="cfStation-class.html">cfStation</a></code> objects
when the agent numbers are known, <code><a href="../articles/choose-station.html">vignette("choose-station")</a></code> for a
tutorial on finding <span class="pkg">clifro</span> stations and <code><a href="../articles/cfStation.html">vignette("cfStation")</a></code>
for working with <code><a href="cfStation-class.html">cfStation</a></code> objects.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Station Name Search ------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Return all open stations with 'island' in the name (pattern match search)</span></span></span>
<span class="r-in"><span><span class="co"># Note this example uses all the defaults</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">island_st</span> <span class="op">=</span> <span class="fu">cf_find_station</span><span class="op">(</span><span class="st">"island"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">island_st</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Region Search ------------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Return all the closed stations from Queenstown (using partial matching)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">queenstown.st</span> <span class="op">=</span> <span class="fu">cf_find_station</span><span class="op">(</span><span class="st">"queen"</span>, search <span class="op">=</span> <span class="st">"region"</span>, status <span class="op">=</span> <span class="st">"closed"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">queenstown.st</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Long/Lat Search ----------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Return all open stations within a 10km radius of the Beehive in Wellington</span></span></span>
<span class="r-in"><span><span class="co"># From Wikipedia: latitude 41.2784 S, longitude 174.7767 E</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">beehive.st</span> <span class="op">=</span> <span class="fu">cf_find_station</span><span class="op">(</span>lat <span class="op">=</span> <span class="op">-</span><span class="fl">41.2784</span>, long <span class="op">=</span> <span class="fl">174.7767</span>, rad <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                             search <span class="op">=</span> <span class="st">"latlong"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">beehive.st</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Network ID Search --------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Return all stations that share A42 in their network ID</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">A42.st</span> <span class="op">=</span> <span class="fu">cf_find_station</span><span class="op">(</span><span class="st">"A42"</span>, search <span class="op">=</span> <span class="st">"network"</span>, status <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">A42.st</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using Datatypes in the Search --------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Is the Reefton EWS station open and does it collect daily rain and/or wind</span></span></span>
<span class="r-in"><span><span class="co"># data?</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># First, create the daily rain and wind datatypes</span></span></span>
<span class="r-in"><span><span class="va">daily.dt</span> <span class="op">=</span> <span class="fu"><a href="cfDatatype-class.html">cf_datatype</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">daily.dt</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Then combine into the search. This will only return stations where at least</span></span></span>
<span class="r-in"><span><span class="co"># one datatype is available.</span></span></span>
<span class="r-in"><span><span class="fu">cf_find_station</span><span class="op">(</span><span class="st">"reefton EWS"</span>, datatype <span class="op">=</span> <span class="va">daily.dt</span><span class="op">)</span>  <span class="co"># Yes</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># OR Query Search ----------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Return all stations sharing A42 in their network ID *or* all the open</span></span></span>
<span class="r-in"><span><span class="co"># stations within 10km of the Beehive in Wellington (note this is not</span></span></span>
<span class="r-in"><span><span class="co"># currently available as a single query in CliFlo).</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">cf_find_station</span><span class="op">(</span><span class="st">"A42"</span>, search <span class="op">=</span> <span class="st">"network"</span>, status <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span><span class="fu">cf_find_station</span><span class="op">(</span>lat <span class="op">=</span> <span class="op">-</span><span class="fl">41.2784</span>, long <span class="op">=</span> <span class="fl">174.7767</span>, rad <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                search <span class="op">=</span> <span class="st">"latlong"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note these are all ordered by open stations, then again by their end dates</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

